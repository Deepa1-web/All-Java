//server 
package udpcommunication;

import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class Server {
    public static void main(String[] args) throws Exception{
        DatagramSocket  ds=new DatagramSocket(9999);
        System.out.println("server is ready");
        while (true){
            byte[]dReceive=new byte[1024];
            DatagramPacket dpReceive=new DatagramPacket(dReceive,dReceive.length);
            ds.receive(dpReceive);
            String message=new String(dpReceive.getData(),0,dpReceive.getLength());
            System.out.println("client:"+message);
            byte []dSend=message.getBytes();
            InetAddress ia=InetAddress.getLocalHost();
            DatagramPacket dpSend=new DatagramPacket(dSend,dSend.length,ia, dpReceive.getPort());
            ds.send(dpSend);
        }
    }
}

//client 
package udpcommunication;

import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.util.Scanner;

public class Client {
    public static void main(String[] args) throws Exception{
        DatagramSocket ds=new DatagramSocket();
        Scanner sc=new Scanner(System.in);
        System.out.println("enter message");
        while (true){
            byte[]dSend=sc.nextLine().getBytes();
            InetAddress ia=InetAddress.getLocalHost();
            DatagramPacket dpSend=new DatagramPacket(dSend,dSend.length,ia,9999);
            ds.send(dpSend);
            byte[]dReceive=new byte[1024];
            DatagramPacket dpReceive=new DatagramPacket(dReceive,dReceive.length);
            ds.receive(dpReceive);
            String message=new String(dpReceive.getData(),0,dpReceive.getLength());
            System.out.println("server:"+message);
        }

    }
}
